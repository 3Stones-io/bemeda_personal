<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site2 - Scenarios</title>
    <link rel="stylesheet" href="../assets/css/color-system.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: var(--color-text-primary); background: var(--color-bg-secondary); }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .topbar a.learn-link { color: var(--color-primary); text-decoration: none; font-weight: 600; }
        .menu { display: flex; gap: 12px; }
        .menu a { text-decoration: none; color: var(--color-text-secondary); padding: 8px 12px; border-radius: 8px; background: var(--color-bg-primary); border: 1px solid var(--color-border-light); }
        .menu a.active { color: var(--color-primary); border-color: var(--color-primary); background: #eff6ff; font-weight: 600; }
        .header { text-align: center; margin-bottom: 24px; padding: 24px 0 8px; }
        .header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 6px; }
        .section { background: var(--color-bg-primary); border-radius: 12px; padding: 24px; border: 1px solid var(--color-border); margin-bottom: 20px; }
        .columns { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
        .col { background: var(--color-bg-tertiary); border: 1px solid var(--color-border-light); border-radius: 10px; padding: 16px; }
        .col h3 { font-size: 1.1rem; margin-bottom: 8px; }
        .list { list-style: none; padding-left: 0; }
        .list li { padding: 6px 0; color: var(--color-text-secondary); }
    </style>
</head>
<body>
    <div class="container">
        <div class="topbar">
            <a class="learn-link" href="../integration/index.html">‚Üó Learn the system we USE</a>
            <nav class="menu">
                <a href="index.html">Home</a>
                <a href="plan.html">Plan</a>
                <a href="do.html">Do</a>
            </nav>
        </div>

        <div class="header">
            <h1>Scenarios</h1>
            <p>View scenarios by domain: Business (B_S), UX (U_S), Technical (T_S).</p>
        </div>

        <section class="section">
            <div class="columns">
                <div class="col">
                    <h3>üíº Business (B)</h3>
                    <ul class="list" id="scenarios-b-list">
                        <li>B_S001 Cold Call to Placement</li>
                        <li>B_S002 Temporary Staffing</li>
                        <li>B_S003 Recurring Contracts</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>üé® UX (U)</h3>
                    <ul class="list" id="scenarios-u-list">
                        <li>U_S001 Sales Dashboard Updates</li>
                        <li>U_S002 Temp Staffing UX</li>
                        <li>U_Platform Design System</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>‚öôÔ∏è Technical (T)</h3>
                    <ul class="list" id="scenarios-t-list">
                        <li>T_S001 CRM Logging</li>
                        <li>T_S004 Auth Flow</li>
                        <li>T_F001-015 Foundational</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Actors (appended) -->
        <section class="section">
            <div class="columns">
                <div class="col">
                    <h3>üíº Actors (Business)</h3>
                    <ul class="list" id="actors-b-list">
                        <li>Healthcare Organisation</li>
                        <li>Healthcare Professional</li>
                        <li>Sales Team</li>
                        <li>Organisation</li>
                        <li>JobSeeker</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>üé® Actors (UX)</h3>
                    <ul class="list" id="actors-u-list">
                        <li>Mobile App Interface</li>
                        <li>Sales Dashboard</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>‚öôÔ∏è Actors (Technical)</h3>
                    <ul class="list" id="actors-t-list">
                        <li>CRM System</li>
                        <li>Matching Engine</li>
                        <li>Auth System</li>
                        <li>Database</li>
                        <li>Email Service</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Components (appended) -->
        <section class="section">
            <div class="columns">
                <div class="col">
                    <h3>üíº Components (Business)</h3>
                    <ul class="list" id="components-b-list">
                        <li>Loading‚Ä¶</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>üé® Components (UX)</h3>
                    <ul class="list" id="components-u-list">
                        <li>Loading‚Ä¶</li>
                    </ul>
                </div>
                <div class="col">
                    <h3>‚öôÔ∏è Components (Technical)</h3>
                    <ul class="list" id="components-t-list">
                        <li>Loading‚Ä¶</li>
                    </ul>
                </div>
            </div>
        </section>
        <script>
            (function(){
                function addItems(listId, items) {
                    var ul = document.getElementById(listId);
                    if (!ul) return;
                    ul.innerHTML = '';
                    items.forEach(function(text){
                        var li = document.createElement('li');
                        li.textContent = text;
                        ul.appendChild(li);
                    });
                }

                function uniq(arr){ return Array.from(new Set(arr.filter(Boolean))); }

                fetch('../registry/components.json')
                    .then(function(r){ return r.json(); })
                    .then(function(data){
                        // Scenarios
                        var bScenarios = [];
                        if (data.user_stories) Object.values(data.user_stories).forEach(function(it){ if (it.scenario) bScenarios.push('B_' + it.scenario); });
                        if (data.use_cases) Object.values(data.use_cases).forEach(function(it){ if (it.scenario) bScenarios.push('B_' + it.scenario); });
                        var uScenarios = [];
                        if (data.ui_flows) Object.values(data.ui_flows).forEach(function(it){ if (it.scenario) uScenarios.push('U_' + it.scenario); });
                        if (data.mockups) Object.values(data.mockups).forEach(function(it){ if (it.scenario) uScenarios.push('U_' + it.scenario); });
                        var tScenarios = [];
                        if (data.features) Object.values(data.features).forEach(function(it){ if (it.scenario) tScenarios.push('T_' + it.scenario); });
                        if (data.test_cases) Object.values(data.test_cases).forEach(function(it){ if (it.scenario) tScenarios.push('T_' + it.scenario); });
                        addItems('scenarios-b-list', uniq(bScenarios).sort());
                        addItems('scenarios-u-list', uniq(uScenarios).sort());
                        addItems('scenarios-t-list', uniq(tScenarios).sort());

                        // Actors (derived from participants per domain)
                        var bActors = [];
                        if (data.user_stories) Object.values(data.user_stories).forEach(function(it){ if (it.participant) bActors.push(it.participant); });
                        if (data.use_cases) Object.values(data.use_cases).forEach(function(it){ if (it.participant) bActors.push(it.participant); });
                        var uActors = [];
                        if (data.ui_flows) Object.values(data.ui_flows).forEach(function(it){ if (it.participant) uActors.push(it.participant); });
                        if (data.mockups) Object.values(data.mockups).forEach(function(it){ if (it.participant) uActors.push(it.participant); });
                        var tActors = [];
                        if (data.tech_components) Object.values(data.tech_components).forEach(function(it){ if (it.title) tActors.push(it.title); });
                        addItems('actors-b-list', uniq(bActors).sort());
                        addItems('actors-u-list', uniq(uActors).sort());
                        addItems('actors-t-list', uniq(tActors).sort());

                        // Components
                        var bComponents = [];
                        if (data.user_stories) Object.values(data.user_stories).forEach(function(it){ bComponents.push(it.id + ' ' + it.title); });
                        if (data.use_cases) Object.values(data.use_cases).forEach(function(it){ bComponents.push(it.id + ' ' + it.title); });
                        var uComponents = [];
                        if (data.ui_flows) Object.values(data.ui_flows).forEach(function(it){ uComponents.push(it.id + ' ' + it.title); });
                        if (data.ui_components) Object.values(data.ui_components).forEach(function(it){ uComponents.push(it.id + ' ' + it.title); });
                        if (data.mockups) Object.values(data.mockups).forEach(function(it){ uComponents.push(it.id + ' ' + it.title); });
                        var tComponents = [];
                        if (data.features) Object.values(data.features).forEach(function(it){ tComponents.push(it.id + ' ' + it.title); });
                        if (data.tech_components) Object.values(data.tech_components).forEach(function(it){ tComponents.push(it.id + ' ' + it.title); });
                        if (data.test_cases) Object.values(data.test_cases).forEach(function(it){ tComponents.push(it.id + ' ' + it.title); });
                        addItems('components-b-list', uniq(bComponents).sort());
                        addItems('components-u-list', uniq(uComponents).sort());
                        addItems('components-t-list', uniq(tComponents).sort());
                    })
                    .catch(function(){ /* leave static fallback content */ });
            })();
        </script>
    </div>
</body>
</html>

